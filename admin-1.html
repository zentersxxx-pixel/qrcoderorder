<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç≥ ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <h1>üç≥ ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô</h1>
    <p>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</p>
</header>

<div id="order-list" style="padding:20px;"></div>

<script>
let orders = JSON.parse(localStorage.getItem("orders")) || [];

function renderOrders() {
    const orders = JSON.parse(localStorage.getItem("orders")) || [];
    const container = document.getElementById("order-list");
    container.innerHTML = "";

    if (orders.length === 0) {
        container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>";
        return;
    }

    orders.forEach((order) => {
        let itemsHTML = "";
        let total = 0;

        for (let id in order.items) {
            const item = order.items[id];
            total += item.price * item.qty;
            itemsHTML += `<li>${item.name} x ${item.qty}</li>`;
        }

        container.innerHTML += `
        <div class="menu-card" style="margin-bottom:20px;">
            <h3>üßæ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${order.id}</h3>
            <p><strong>‡πÇ‡∏ï‡πä‡∏∞:</strong> ${order.table || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏"}</p>

            <ul>${itemsHTML}</ul>
            <p><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong> ${total.toFixed(2)} ‡∏ö‡∏≤‡∏ó</p>
            <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ${order.status}</p>

            <div style="display:flex; gap:10px; margin-top:10px;">
                ${
                    order.status === "‡∏£‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå"
                    ? `<button onclick="acceptOrder(${order.id})">‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>`
                    : `<button disabled>üçΩÔ∏è ‡∏£‡∏≠‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü</button>`
                }
                <button onclick="deleteOrder(${order.id})" style="background:#d9534f;">
                    ‚ùå ‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
                </button>
            </div>
        </div>
        `;
    



    });
}

function acceptOrder(orderId) {
    let orders = JSON.parse(localStorage.getItem("orders")) || [];

    const order = orders.find(o => o.id === orderId);
    if (order) {
        order.status = "‡∏£‡∏≠‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü";
        localStorage.setItem("orders", JSON.stringify(orders));
        renderOrders();
    }
}



renderOrders();

function deleteOrder(orderId) {
    if (!confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;

    orders = orders.filter(order => order.id !== orderId);

    localStorage.setItem("orders", JSON.stringify(orders));
    renderOrders();
}



</script>

</body>
</html>
